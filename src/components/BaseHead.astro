---
import { getImage } from "@astrojs/image";
// import SEO from "simple-astro-seo";
import { SEO } from "astro-seo";
import site from "@src/data/site.js";
import { GoogleAnalytics } from "astro-google-analytics";

// import "@fontsource/Poppins/800.css";
import "@fontsource/poppins/800.css";
import "@fontsource/poppins/900.css";
import "@fontsource/poppins/400.css";
import "@fontsource/poppins/500.css";
import "@fontsource/syne/800.css";
import "@fontsource/syne/700.css";
import "@fontsource/syne/600.css";
import "@fontsource/syne/500.css";
import "@fontsource/syne/400.css";

export interface Props {
  title?: string;
  description?: string;
  image?: string | ImageMetadata;
  canonicalURL?: URL | null;
  pageType?: "website" | "article";
  twitterHandle?: string;
}

const {
  description = site.description,
  image = site.image,
  canonicalURL = new URL(Astro.request.url, Astro.site),
  pageType = "website",
  twitterHandle = site.twitterHandle,
} = Astro.props as Props;

const ensureTrailingSlash = (url: string) => url.replace(/\/$/, "") + "/";
const resolvedImage = await getImage({
  src: image,
  width: 1200,
  aspectRatio: 2,
  format: "jpeg",
  alt: "iuliia",
});
const resolvedImageWithDomain = new URL(
  resolvedImage.src,
  Astro.url
).toString();
const title = site.title ? site.title : "Iuliia | Creative UI/UX Designer";
---

<!-- Global Metadata -->
<meta charset="utf-8" />
<meta name="generator" content={Astro.generator} />
<meta name="viewport" content="width=device-width" />
<meta name="theme-color" content="#8D46E7" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="mask-icon" href="/favicon.svg" color="#8D46E7" />
<link rel="sitemap" href="/sitemap-index.xml" />
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="RSS" />

<title set:html={(title, "Iuliia | Design")} />

<GoogleAnalytics id="G-Q7H5NY0Q1B" />

<!-- <SEO
  siteName={title}
  {description}
  image={resolvedImageWithDomain}
  pageType={pageType}
  url={ensureTrailingSlash(canonicalURL.toString())}
/> -->

<SEO
  title={title}
  description={description}
  canonical={canonicalURL}
  twitter={{
    creator: "@iuliiadesign",
    site: "iuliiadesign.com",
  }}
  openGraph={{
    basic: {
      url: canonicalURL,
      type: "website",
      title: `Iuliia Design - Creative UI UX Designer`,
      image: resolvedImageWithDomain,
    },
    image: {
      alt: "Iuliia Design",
    },
  }}
/>
<!-- 
<SEO
  title={title}
  description={description}
  twitter={{
    creator: "@iuliiadesign",
  }}
/> -->
